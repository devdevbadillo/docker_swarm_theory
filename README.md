# Docker Swarm

## Tabla de Contenido

- [Introducción a la Orquestación de Contenedores y Docker Swarm](#introduccion-orquestacion-docker-swarm)
  - [¿Qué es la Orquestación de Contenedores?](#que-es-orquestacion-contenedores)
  - [¿Por qué Docker Swarm?](#por-que-docker-swarm)
  - [Docker Swarm vs. Docker Compose](#docker-swarm-vs-docker-compose)
  - [Docker Swarm vs. Kubernetes (Visión General)](#docker-swarm-vs-kubernetes)

- [Conceptos Centrales de Docker Swarm](#conceptos-centrales-docker-swarm)
  - [Nodos (Nodes): Manager y Worker](#nodos-manager-worker)
  - [Servicios (Services)](#servicios-docker-swarm)
  - [Tareas (Tasks)](#tareas-docker-swarm)
  - [Stacks](#stacks-docker-swarm)
  - [Redes Overlay](#redes-overlay-docker-swarm)
  - [Balanceo de Carga](#balanceo-carga-docker-swarm)
  - [Modo Swarm](#modo-swarm)

- [Configuración de un Cluster Docker Swarm](#configuracion-cluster-docker-swarm)
  - [Requisitos Previos](#requisitos-previos-docker-swarm)
  - [Inicializar el Swarm (`docker swarm init`)](#inicializar-swarm)
  - [Unir Nodos Worker (`docker swarm join`)](#unir-nodos-worker)
  - [Unir Nodos Manager Adicionales](#unir-nodos-manager-adicionales)
  - [Listar y Gestionar Nodos (`docker node ls`)](#listar-gestionar-nodos)
  - [Drenar y Eliminar Nodos](#drenar-eliminar-nodos)

- [Despliegue y Gestión de Servicios](#despliegue-gestion-servicios)
  - [Crear un Servicio (`docker service create`)](#crear-servicio)
    - [Definición de Imágenes](#definicion-imagenes-servicio)
    - [Publicación de Puertos](#publicacion-puertos-servicio)
    - [Variables de Entorno](#variables-entorno-servicio)
    - [Volúmenes](#volumenes-servicio)
  - [Escalar Servicios (`docker service scale`)](#escalar-servicios)
  - [Actualizar Servicios (`docker service update`)](#actualizar-servicios)
    - [Estrategias de Despliegue (Rolling Update)](#estrategias-despliegue)
    - [Rollbacks](#rollbacks-servicio)
  - [Eliminar Servicios (`docker service rm`)](#eliminar-servicios)
  - [Inspeccionar Servicios (`docker service inspect`)](#inspeccionar-servicios)
  - [Logs de Servicios (`docker service logs`)](#logs-servicios)

- [Despliegue y Gestión de Stacks (Docker Compose en Swarm)](#despliegue-gestion-stacks)
  - [¿Qué es un Stack?](#que-es-stack)
  - [Archivo `docker-compose.yml` para Swarm](#docker-compose-yml-swarm)
    - [Versión 3 del Formato](#version-3-compose)
    - [Sintaxis Específica de Swarm](#sintaxis-especifica-swarm)
  - [Desplegar un Stack (`docker stack deploy`)](#desplegar-stack)
  - [Listar Stacks y Servicios de un Stack](#listar-stacks-servicios)
  - [Actualizar Stacks](#actualizar-stacks)
  - [Eliminar Stacks (`docker stack rm`)](#eliminar-stacks)

- [Redes en Docker Swarm](#redes-docker-swarm)
  - [Conceptos de Redes de Contenedores](#conceptos-redes-contenedores)
  - [Redes Overlay (`overlay`)](#redes-overlay)
    - [Creación de Redes Overlay](#creacion-redes-overlay)
    - [Conexión de Servicios a Redes Overlay](#conexion-servicios-overlay)
  - [Red de Ingress (`ingress network`)](#red-ingress)
    - [Publicación de Puertos Externos](#publicacion-puertos-externos)
    - [Modo de Publicación (Ingress vs Host)](#modo-publicacion-ingress-host)
  - [Balanceo de Carga Interno y Externo](#balanceo-carga-interno-externo)
    - [DNS Round Robin](#dns-round-robin)
    - [Routing Mesh](#routing-mesh)

- [Almacenamiento en Docker Swarm](#almacenamiento-docker-swarm)
  - [Volúmenes (`volumes`)](#volumenes-docker-swarm)
    - [Volúmenes Nombrados](#volumenes-nombrados)
    - [Volúmenes Anónimos](#volumenes-anonimos)
  - [Bind Mounts](#bind-mounts-docker-swarm)
  - [Plugins de Volúmenes (Volume Plugins)](#plugins-volumenes)
    - [Almacenamiento Compartido (NFS, GlusterFS)](#almacenamiento-compartido)
  - [Consideraciones de Persistencia en un Cluster](#consideraciones-persistencia-cluster)

- [Seguridad en Docker Swarm](#seguridad-docker-swarm)
  - [Comunicación TLS entre Nodos](#comunicacion-tls-nodos)
  - [Gestión de Secretos (`docker secret`)](#gestion-secretos)
    - [Crear y Usar Secretos](#crear-usar-secretos)
    - [Actualizar y Eliminar Secretos](#actualizar-eliminar-secretos)
  - [Configuraciones (`docker config`)](#configuraciones-docker-swarm)
    - [Crear y Usar Configuraciones](#crear-usar-configuraciones)
  - [Seguridad de Imágenes (Image Signing)](#seguridad-imagenes)
  - [Control de Acceso Basado en Roles (RBAC - Integración)](#rbac-docker-swarm)

- [Monitorización y Logging](#monitorizacion-logging-docker-swarm)
  - [Monitorización Básica de Docker Swarm](#monitorizacion-basica-docker-swarm)
    - [`docker stats`](#docker-stats)
    - [`docker node ps`](#docker-node-ps)
  - [Herramientas de Monitorización Externas](#herramientas-monitorizacion-externas)
    - [Prometheus y Grafana](#prometheus-grafana-docker-swarm)
    - [ELK Stack (Elasticsearch, Logstash, Kibana)](#elk-stack-docker-swarm)
  - [Estrategias de Logging](#estrategias-logging-docker-swarm)
    - [Drivers de Logging](#drivers-logging-docker-swarm)
    - [Centralización de Logs](#centralizacion-logs-docker-swarm)

- [Temas Avanzados y Mejores Prácticas](#temas-avanzados-mejores-practicas-docker-swarm)
  - [Alta Disponibilidad de Managers](#alta-disponibilidad-managers)
    - [Quorum y Tolerancia a Fallos](#quorum-tolerancia-fallos)
    - [Recuperación de Managers Caídos](#recuperacion-managers-caidos)
  - [Actualizaciones de Docker Engine en el Swarm](#actualizaciones-docker-engine)
  - [Troubleshooting Común](#troubleshooting-comun-docker-swarm)
    - [Problemas de Red](#problemas-red-docker-swarm)
    - [Problemas de Servicio](#problemas-servicio-docker-swarm)
    - [Problemas de Nodos](#problemas-nodos-docker-swarm)
  - [Integración con CI/CD](#integracion-ci-cd-docker-swarm)
    - [Pipelines de Despliegue](#pipelines-despliegue-docker-swarm)
